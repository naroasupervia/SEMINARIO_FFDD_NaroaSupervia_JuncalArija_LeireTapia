---
title: "Datos suicidio"
author: "Juncal Arija, Naroa Supervia, Leire Tapia"
date: "2025-11-06"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

#**INTRODUCCIÓN**
contextualiza la idea del seminario, entrega una idea general de la temática, de lo que se sabe y sobre todo de lo que no se sabe y queréis abordar en vuestro trabajo.



#**OBJETIVOS** 
1. Describir la distribución del suicidio por sexo en España. 

2. Analizar las diferencias entre provincias. 

3. Estudiar la influencia del grupo de edad en la cantidad de suicidios. 

4. Unificar los datos CSV y JSON para obtener una vista más completa. 

5. (Opcional) Explorar si existe relación entre grupos de edad + provincias + sexo. 



#**PAQUETES UTILIZADOS**
Para poder utilizar nuestros conjuntos de datos es necesario importar las siguientes librerias y paquetes:

```{r , eval = TRUE,message=FALSE, warning=FALSE}
# Datos con formato .csv:
library(readr)

#Datos con formato .json:
library(tidyverse)
library(rjson)
library(tidyjson)

#Visualizacion resultados:
library(DT)
library(ggplot2)
library(gifski)
library(gganimate)
library(plotly)
library(dplyr)
library(mapSpain)

```



# **DESARROLLO Y RESULTADOS**
Una vez cargadas las librerias importamos los datos

## OBTENCIÓN DE LOS DATOS 
Explicar de donde vienen los datos 

## IMPORTACIÓN DE LOS DATOS

### **IMPORTACIÓN DATOS CSV**
En algunos de nuestros archivos csv, es necesario especificar el tipo de codificación que tienen, para que R pueda leer correctamente los caracteres especiales como *tildes* o *ñ*. En nuestro caso utilizan la codificacion *ISO 8859-1* que corresponde con el alfabeto español??? :

```{r , eval = TRUE,message=FALSE}

# Para conocer el tipo de codificación: 
encoding <- guess_encoding("Input/DATA/provincias_sexo.csv")
print(encoding)

```

```{r , eval = TRUE,message=FALSE}

provincias <- read_delim("Input/DATA/provincias_sexo.csv", 
                        delim = ";", trim_ws = TRUE, 
                        locale = locale(encoding = "ISO-8859-1"))


```
### IMPORTACIÓN DEL JSON


## FILTRADO Y PREPARACIÓN DE LOS DATOS


### cambiamos el separador decimal
En el archivo csv tenemos una columna total con valores numericos usando la coma como separador decimal, esta coma debe convertirse en punto ya que R usa el punto "." como separador decimal:

```{r , eval = TRUE,message=FALSE}
provincias <- provincias %>%
  mutate(Total = as.numeric(gsub(",", ".", Total)))
```


### Normalizar nombres de provincias 



### Eliminar "total" en sexo
Para así comparar hombres vs mujeres 
(entonces yo quitaría lo de cambiar el separador decimal xq si quitamos el total no nos hace falta camibar lo de . por , nose)


### El JSON:separar edad y sexo
Extraer:
- Lista de edades
- Lista de sexos
- Valor 


## RESULTADOS 
Aquí vienen los gráficos 

### Suicidio por sexo a nivel nacional


### Suicidio por provincia


### Suicidio por edad (JSON)

### Union CSV + JSON 


....
Esto me lo dijo chat (puede ser para el 4.4 nose) -->
Como ambos archivos (csv y json) comparten la varaible sexo, podemos unirlos por dicha variable
```{r , eval = TRUE,message=FALSE}
merged <- provincias %>%
  group_by(Sexo) %>%
  summarise(Media_Provincial = mean(Total, na.rm = TRUE)) %>%
  left_join(edades, by = "Sexo")
```




# CONCLUSIONES



#REFERENCIAS 
